function simpletreeInit(tree,dataUrl,smartLoadUrl,afterCall,onLoadingEnd){if(tree.smartLoad){tree.setXMLAutoLoading(CompUtil.getFirstStrNotEmpty(smartLoadUrl,dataUrl));tree.enableSmartXMLParsing(true)}tree.loadXML(dataUrl,afterCall);function treeOnClick(id){var js=tree.getUserData(id,"onclickJs");if(js!=null&&js.indexOf("(")==-1){js+="(id)"}eval(js)}tree.setOnClickHandler(treeOnClick);function treeOncheckJs(id,state){var js=tree.getUserData(id,"oncheckJs");if(js!=null&&js.indexOf("(")==-1){js+="(id,state)"}eval(js)}tree.setOnCheckHandler(treeOncheckJs);function treeOnrightclickJs(id){var js=tree.getUserData(id,"onrightclickJs");if(js!=null&&js.indexOf("(")==-1){js+="(id)"}eval(js)}tree.setOnRightClickHandler(treeOnrightclickJs);function treeOnLoadStart(tree,id){var d=new Date();var newId="id_"+d.valueOf();tree.insertNewChild(id,newId,"\u6b63\u5728\u52a0\u8f7d...","","loading.gif","","","SELECT");tree.showItemCheckbox(newId,false);tree.setUserData(id,"load_id",newId)}tree.setOnLoadingStart(treeOnLoadStart);function treeOnLoadEnd(tree,id){var loadId=tree.getUserData(id,"load_id");if(loadId){tree.deleteItem(loadId,false)}}tree.setOnLoadingEnd(onLoadingEnd||treeOnLoadEnd)}String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"")};String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"")};function notEmpty(b){if(!b){return false}var a=b.replace(/(^\s*)|(\s*$)/g,"");if(a==""){return false}return true}document.createElement4IE=function(c,b,a){if(!b){b=document.body}if(!b){return}var d=document.createElement(c);if(a){b.insertBefore(d,a)}else{b.appendChild(d)}return d};var simpletree_http_request=false;function makeTreeRequest(a,b){simpletree_http_request=false;if(window.ActiveXObject){try{simpletree_http_request=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{simpletree_http_request=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}else{if(window.XMLHttpRequest){simpletree_http_request=new XMLHttpRequest();if(simpletree_http_request.overrideMimeType){simpletree_http_request.overrideMimeType("text/xml")}}}if(!simpletree_http_request){alert("Giving up :( Cannot create an XMLHTTP instance");return false}simpletree_http_request.onreadystatechange=b;simpletree_http_request.open("post",a,true);simpletree_http_request.send(null)}function setOnclick(a,b,c){if(!c){var c=a.getSelectedItemId()}a.setUserData(c,"onclickJs",b)}function setChecked(a,b,c){if(!c){var c=a.getSelectedItemId()}a.setUserData(c,"hasCheckbox",b)}function setOnrightclick(a,b,c){if(!c){var c=a.getSelectedItemId()}a.setUserData(c,"onrightclickJs",b)}function searchItem(k,a,f){var g="";if(!a){alert();return}if(typeof(a)!="string"){alert("\u975e\u5b57\u7b26\u4e32");return}if(!f||f!=1){closeAllItems(k);k.searchIds=""}var c=k.getAllSubItems(k.rootId).split(",");var e=k.searchIds.split(",");for(var d=0;d<c.length;d++){if(k.getItemText(c[d]).indexOf(a)!=-1){var h=false;for(var b=0;b<e.length;b++){if(c[d]==e[b]){h=true;break}}if(h){continue}k.selectItem(c[d],false);k.searchIds+=","+c[d];g=c[d];break}}if(g==""){alert()}return g}function findItem(a,b,d,c){return a.findItem(b,d,c)}function getSimpletreeXml(a){a.setSerializationLevel(1,1,1,1,0);var b=a.serializeTree();return b}function setIconSize(a,c,b){a.setIconSize(c,b,a.getSelectedItemId())}function setItemStyle(a,b){a.setItemStyle(a.getSelectedItemId(),b)}function saveTreeToDB(d,a,b){if(b==1){a.closeAllItems();a.clearSelection()}var e=getSimpletreeXml(a);var c=document.createElement4IE("<input name='xmlString' type='hidden'>",d);c.value=e}function ChangeMenu(a){}function onButtonClick(b,d,c,a){if(b=="menu_open"){a.openItem(d)}else{if(b=="menu_close"){a.closeItem(d)}else{if(b=="menu_open_all"){a.openAllItems(d)}else{if(b=="menu_close_all"){a.closeAllItems(d)}else{if(b=="branch_add"){addBranch(a,d)}else{if(b=="branch_edit"){editBranch(c.innerHTML,a,d)}else{if(b=="branch_remove"){if(window.confirm("\u786e\u5b9a\u8981\u5220\u9664\uff08"+c.innerHTML+"\uff09\u5417\uff1f")){a.deleteItem(d,false)}}else{if(b=="checkbox_add"){a.showItemCheckbox(d,true);setChecked(a,1,d)}else{if(b=="checkbox_remove"){a.showItemCheckbox(d,false);setChecked(a,0,d)}else{if(b=="help_index"){alert("\u540e\u671f\u63d0\u4f9b\uff01")}else{if(b=="help_license"){alert("")}}}}}}}}}}}}function addBranch(a,f){var c=window.showModalDialog(treeBasePath+"../addItem.htm",window,"dialogHeight:400px;dialogWidth:600px;");if(!c){return}var e=new Date();var b="id_"+e.valueOf();if("brother"==c.branch_type){a.insertNewNext(f,b,c.branch_name,"",c.im0,c.im1,c.im2,"SELECT")}else{a.insertNewChild(f,b,c.branch_name,"",c.im0,c.im1,c.im2,"SELECT")}a.showItemCheckbox(b,false);if(c.onclick_event!=""){}setOnclick(a,c.onclick_event,b)}function editBranch(b,a,d){var c=window.showModalDialog(treeBasePath+"../editItem.htm",b,"dialogHeight:600px;dialogWidth:600px;");if(!c){return}if(c.branch_name!=""){a.setItemText(d,c.branch_name,"")}if(c.im0!=""&&c.im1!=""&&c.im2!=""){a.setItemImage2(d,c.im0,c.im1,c.im2)}if(c.color_default!=""&&c.color_selected!=""){a.setItemColor(d,c.color_default,c.color_selected)}if(c.onclick_event!=""){}setOnclick(a,c.onclick_event,d)};
